(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{910:function(e,t,n){"use strict";(function(e){var o;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,a=n(231),l=n(915),s=(r=l)&&r.__esModule?r:{default:r},u=n(233);(i=n(9).enterModule)&&i(e);var c,p,d=u.async.someAsync,f=function(e,t){return{count:e.list.count}},_=function(e,t){return{fetchSomeAsyncRequest:function(){e(d())}}},h=(0,a.connect)(f,_)(o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),t}())||o;t.default=h,c=n(9).default,p=n(9).leaveModule,c&&(c.register(d,"someAsync","E:/test/EternalNiu/src/List/container.js"),c.register(f,"mapStateToProps","E:/test/EternalNiu/src/List/container.js"),c.register(_,"mapDispatchToProps","E:/test/EternalNiu/src/List/container.js"),c.register(h,"Container","E:/test/EternalNiu/src/List/container.js"),p(e))}).call(this,n(19)(e))},911:function(e,t,n){(t=e.exports=n(30)(!1)).push([e.i,".marker_35Uv5 {\n  width: 18px;\n  height: 18px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 12px;\n  border: 1px solid;\n  border-radius: 50%;\n}\n.buttonGroup_T6_yY {\n  position: absolute;\n  top: 90px;\n  right: 20px;\n  z-index: 999;\n}\n.buttonGroup2_oDrIQ {\n  position: absolute;\n  top: 122px;\n  right: 83px;\n  z-index: 999;\n}\n.buttonGroup2_oDrIQ .ant-checkbox-group-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-right: 0px;\n  border: 1px solid #ccc;\n  padding: 4px 8px;\n  border-radius: 3px;\n}\n.buttonGroup2_oDrIQ .ant-checkbox-group {\n  display: flex;\n  flex-direction: column;\n  background: white;\n}\n.buttonGroup2_oDrIQ .ant-checkbox-group-item > span:last-child {\n  width: 18px;\n  height: 18px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 1px solid;\n  border-radius: 50%;\n  font-size: 12px;\n}\n.buttonGroup3_2PIYH {\n  position: absolute;\n  top: 122px;\n  right: 146px;\n  display: flex;\n  flex-direction: column;\n  z-index: 999;\n}\n",""]),t.locals={marker:"marker_35Uv5",buttonGroup:"buttonGroup_T6_yY",buttonGroup2:"buttonGroup2_oDrIQ",buttonGroup3:"buttonGroup3_2PIYH"}},914:function(e,t,n){var o=n(911);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},i=n(29)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(911,function(t){!function(){var t=n(911);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,o=0;for(n in e){if(!t||e[n]!==t[n])return!1;o++}for(n in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");i(t)}()}),e.hot.dispose(function(){i()})},915:function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0});var _message2=__webpack_require__(463),_message3=_interopRequireDefault(_message2),_checkbox=__webpack_require__(464),_checkbox2=_interopRequireDefault(_checkbox),_button=__webpack_require__(63),_button2=_interopRequireDefault(_button),_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();__webpack_require__(466),__webpack_require__(465),__webpack_require__(172);var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_platform=__webpack_require__(914),_platform2=_interopRequireDefault(_platform),_reactAmapBinding=__webpack_require__(462),enterModule;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}enterModule=__webpack_require__(9).enterModule,enterModule&&enterModule(module);var ButtonGroup=_button2.default.Group,CheckboxGroup=_checkbox2.default.Group,AMAP_KEY="964ffab2ef1edca12c97f817342c4315",AMAP_STYLE="amap://styles/9c109cbf2e0f55701c6ec4e5c90c56ba",polyEditor=void 0,editIndex=void 0,List=function(_Component){function List(e){_classCallCheck(this,List);var t=_possibleConstructorReturn(this,(List.__proto__||Object.getPrototypeOf(List)).call(this,e));return t.polygon={},t.otherPolygon=[],t.state={bound:void 0,checkedValues:[],isShowClearList:!1,isShowEditList:!1,milkArea:[[[120.189268,30.205297],[120.1915,30.201588],[120.198796,30.205297],[120.196821,30.208635],[120.189268,30.205297]],[[120.193989,30.197285],[120.201113,30.20092],[120.202572,30.198027],[120.202658,30.196098],[120.202658,30.19187],[120.195276,30.191202],[120.193989,30.197285]],[[120.206434,30.209154],[120.208838,30.205074],[120.216648,30.209228],[120.213301,30.213827],[120.210812,30.216571],[120.20858,30.214049],[120.204203,30.211973],[120.206434,30.209154]],[[120.209954,30.198695],[120.218022,30.199956],[120.218107,30.194466],[120.228407,30.195134],[120.229094,30.195208],[120.228836,30.19187],[120.218622,30.192167],[120.218365,30.190089],[120.210983,30.189644],[120.209954,30.198695]]],otherMilkArea:[[[120.224201,30.213382],[120.232269,30.217164],[120.235016,30.211527],[120.234501,30.206558],[120.229094,30.206187],[120.224201,30.213382]],[[120.234415,30.200475],[120.234673,30.201291],[120.240681,30.201069],[120.241797,30.194318],[120.234587,30.194689],[120.234415,30.200475]],[[120.235188,30.19187],[120.233814,30.182967],[120.244286,30.18267],[120.243685,30.19187],[120.235703,30.191499],[120.235188,30.19187]],[[120.210683,30.181557],[120.211541,30.176363],[120.231626,30.175325],[120.23154,30.183115],[120.210683,30.181557]]],marker:[[120.243548,30.199871],[120.249148,30.199816],[120.249256,30.194419],[120.243569,30.194511],[120.243548,30.199871]]},t}return _inherits(List,_Component),_createClass(List,[{key:"componentDidUpdate",value:function(e){var t=this;setTimeout(function(){t.map&&t.map.setFitView()},500)}},{key:"cratePoly",value:function(){var e=this;this.map.plugin(["AMap.MouseTool"],function(){var t=new window.AMap.MouseTool(e.map);t.polygon({fillColor:"#8dc5f3",strokeColor:"#4f7de3",fillOpacity:"0.3"}),t.on("draw",function(n){var o=n.obj.getPath().map(function(e){return[e.lng,e.lat]});e.setState(_extends({},e.state,{milkArea:[].concat(_toConsumableArray(e.state.milkArea),[o])})),t.close(!0)})})}},{key:"countPolygonCenter",value:function(e){return e.map(function(e){var t=e.map(function(e){return e[0]||e.lng}),n=e.map(function(e){return e[1]||e.lat});return[.5*(Math.min.apply(null,t)+Math.max.apply(null,t)),.5*(Math.min.apply(null,n)+Math.max.apply(null,n))]})}},{key:"clearPolygon",value:function(){editIndex=null;var e=this.state,t=e.checkedValues,n=e.milkArea;if(polyEditor){var o=polyEditor.aq[0].map(function(e){return[e.lng,e.lat]});this.setState(_extends({},this.state,{milkArea:this.state.milkArea.map(function(e,t){return t===editIndex?o:e})})),polyEditor.close()}console.log(t);var r=n;t.length>0&&t.forEach(function(e){r=r.filter(function(t,n){return n+1!==+e})}),console.log(r),this.setState(_extends({},this.state,{milkArea:r,isShowClearList:!1}))}},{key:"editPolygon",value:function(e){var t=this;if(editIndex=e,polyEditor){var n=polyEditor.aq[0].map(function(e){return[e.lng,e.lat]});this.setState(_extends({},this.state,{milkArea:this.state.milkArea.map(function(e,t){return t===editIndex?n:e})})),polyEditor.close()}var o=this.polygon[e];this.polygonIndex=e,this.map.plugin(["AMap.PolyEditor"],function(){(polyEditor=new window.AMap.PolyEditor(t.map,o)).open()}),this.polyEditor=polyEditor}},{key:"onMapComplete",value:function(e){this.map=e,this.map.setFitView()}},{key:"savePolygon",value:function(){var e=this,t=this.state.milkArea;if(polyEditor){var n=void 0;if(this.otherPolygon.map(function(t){n=e.compare(t,e.polygon[editIndex])}),editIndex=null,!n)return;var o=polyEditor.aq[0].map(function(e){return[e.lng,e.lat]});this.setState(_extends({},this.state,{milkArea:t.map(function(e,t){return t===editIndex?o:e})})),polyEditor.close(),this.hideList(),polyEditor=null}}},{key:"compare",value:function(e,t){var n=e.getPath(),o=t.getPath(),r=window.AMap.GeometryUtil.isRingInRing(o,n),i=window.AMap.GeometryUtil.doesRingRingIntersect(o,n),a=window.AMap.GeometryUtil.ringRingClip(o,n),l=parseInt(window.AMap.GeometryUtil.ringArea(a)),s=!0;return r?(_message3.default.error("两圈关系：在大圈内"),s=!1):i&&(_message3.default.error("两圈关系：两圈相交, 交叉区域面积为"+l+"平方米"),s=!1),s}},{key:"onPolygonComplete",value:function(e,t,n){this.polygon[e]=n}},{key:"otherPolygonComplete",value:function(e,t,n){this.otherPolygon.push(n)}},{key:"toggleClearList",value:function(){0!==this.state.milkArea.length&&this.setState({isShowClearList:!this.state.isShowClearList,isShowEditList:!1})}},{key:"toggleEditList",value:function(){0!==this.state.milkArea.length&&this.setState({isShowClearList:!1,isShowEditList:!this.state.isShowEditList})}},{key:"hideList",value:function(){this.setState({isShowClearList:!1,isShowEditList:!1})}},{key:"onCheckboxChange",value:function(e){this.setState({checkedValues:e})}},{key:"render",value:function(){var e=this,t=this.state,n=t.bound,o=t.milkArea,r=t.otherMilkArea,i=t.isShowEditList,a=t.isShowClearList,l=t.marker,s=this.countPolygonCenter(o),u=Array.from({length:s.length}).map(function(e,t){return""+(t+1)}),c=100*(1-160/window.innerHeight);return _react2.default.createElement("div",{style:{width:"100%",height:c+"vh",position:"reelative"}},_react2.default.createElement(ButtonGroup,{className:_platform2.default.buttonGroup},_react2.default.createElement(_button2.default,{onClick:this.cratePoly.bind(this)},"绘制"),_react2.default.createElement(_button2.default,{onClick:this.toggleEditList.bind(this)},"编辑"),_react2.default.createElement(_button2.default,{onClick:this.toggleClearList.bind(this)},"清除"),_react2.default.createElement(_button2.default,{onClick:this.savePolygon.bind(this)},"保存")),a&&_react2.default.createElement("div",{className:_platform2.default.buttonGroup2},_react2.default.createElement(CheckboxGroup,{options:u,onChange:this.onCheckboxChange.bind(this)}),_react2.default.createElement(_button2.default,{onClick:this.clearPolygon.bind(this),type:"primary"},"确定")),i&&_react2.default.createElement("div",{className:_platform2.default.buttonGroup3},u.map(function(t){return _react2.default.createElement(_button2.default,{onClick:e.editPolygon.bind(e,t),key:t},t)})),_react2.default.createElement(_reactAmapBinding.AMap,{appKey:AMAP_KEY,bounds:n,defaultCursor:"pointer",mapStyle:AMAP_STYLE,onComplete:this.onMapComplete.bind(this),onClick:this.hideList.bind(this),zoom:13},o.map(function(t,n){return _react2.default.createElement(_reactAmapBinding.Polygon,{key:n,fillColor:"#8dc5f3",strokeColor:"#4f7de3",fillOpacity:"0.3",path:t,onComplete:e.onPolygonComplete.bind(e,n+1)})}),s.map(function(e,t){return _react2.default.createElement(_reactAmapBinding.Marker,{content:"<div class='"+_platform2.default.marker+"'>\n                    "+(t+1)+"\n                  </div>",key:t,offset:[-10,-10],position:e})}),r.map(function(t,n){return _react2.default.createElement(_reactAmapBinding.Polygon,{key:n,path:t,strokeColor:"#4285F4",fillColor:"black",fillOpacity:"0.3",bubble:!0,onComplete:e.otherPolygonComplete.bind(e,n+1)})}),l.map(function(e,t){return _react2.default.createElement(_reactAmapBinding.Marker,{key:t,position:e,offset:[-10,-30]})})))}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),List}(_react.Component),_default=List,reactHotLoader,leaveModule;exports.default=_default,reactHotLoader=__webpack_require__(9).default,leaveModule=__webpack_require__(9).leaveModule,reactHotLoader&&(reactHotLoader.register(ButtonGroup,"ButtonGroup","E:/test/EternalNiu/src/List/component.js"),reactHotLoader.register(CheckboxGroup,"CheckboxGroup","E:/test/EternalNiu/src/List/component.js"),reactHotLoader.register(AMAP_KEY,"AMAP_KEY","E:/test/EternalNiu/src/List/component.js"),reactHotLoader.register(AMAP_STYLE,"AMAP_STYLE","E:/test/EternalNiu/src/List/component.js"),reactHotLoader.register(polyEditor,"polyEditor","E:/test/EternalNiu/src/List/component.js"),reactHotLoader.register(editIndex,"editIndex","E:/test/EternalNiu/src/List/component.js"),reactHotLoader.register(List,"List","E:/test/EternalNiu/src/List/component.js"),reactHotLoader.register(_default,"default","E:/test/EternalNiu/src/List/component.js"),leaveModule(module))}).call(this,__webpack_require__(19)(module))}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvTGlzdC9jb250YWluZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0xpc3QvcGxhdGZvcm0ubGVzcyIsIndlYnBhY2s6Ly8vLi9zcmMvTGlzdC9wbGF0Zm9ybS5sZXNzPzY3ZmIiLCJ3ZWJwYWNrOi8vLy4vc3JjL0xpc3QvY29tcG9uZW50LmpzIl0sIm5hbWVzIjpbIl9yZWFjdFJlZHV4IiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIl9jb21wb25lbnQiLCJfYWN0aW9ucyIsInNvbWVBc3luYyIsImFzeW5jIiwibWFwU3RhdGVUb1Byb3BzIiwic3RhdGUiLCJvd25Qcm9wcyIsImNvdW50IiwibGlzdCIsIm1hcERpc3BhdGNoVG9Qcm9wcyIsImRpc3BhdGNoIiwiZmV0Y2hTb21lQXN5bmNSZXF1ZXN0IiwiQ29udGFpbmVyIiwiY29ubmVjdCIsIkNvbXBvbmVudCIsImV4cG9ydHMiLCJtb2R1bGUiLCJwdXNoIiwiaSIsImxvY2FscyIsIm1hcmtlciIsImJ1dHRvbkdyb3VwIiwiYnV0dG9uR3JvdXAyIiwiYnV0dG9uR3JvdXAzIiwiY29udGVudCIsIm9wdGlvbnMiLCJobXIiLCJ0cmFuc2Zvcm0iLCJpbnNlcnRJbnRvIiwidW5kZWZpbmVkIiwidXBkYXRlIiwiaG90IiwiYWNjZXB0IiwiX19XRUJQQUNLX09VVERBVEVEX0RFUEVOREVOQ0lFU19fIiwibmV3Q29udGVudCIsImEiLCJiIiwia2V5IiwiaWR4IiwiRXJyb3IiLCJkaXNwb3NlIiwiX3JlYWN0IiwiX3BsYXRmb3JtIiwiX3JlYWN0QW1hcEJpbmRpbmciLCJCdXR0b25Hcm91cCIsIl9idXR0b24yIiwiZGVmYXVsdCIsIkdyb3VwIiwiQ2hlY2tib3hHcm91cCIsIl9jaGVja2JveDIiLCJBTUFQX0tFWSIsIkFNQVBfU1RZTEUiLCJwb2x5RWRpdG9yIiwiZWRpdEluZGV4IiwiTGlzdCIsInByb3BzIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl90aGlzIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJfX3Byb3RvX18iLCJPYmplY3QiLCJnZXRQcm90b3R5cGVPZiIsImNhbGwiLCJwb2x5Z29uIiwib3RoZXJQb2x5Z29uIiwiYm91bmQiLCJjaGVja2VkVmFsdWVzIiwiaXNTaG93Q2xlYXJMaXN0IiwiaXNTaG93RWRpdExpc3QiLCJtaWxrQXJlYSIsIm90aGVyTWlsa0FyZWEiLCJwcmV2UHJvcHMiLCJfdGhpczIiLCJzZXRUaW1lb3V0IiwibWFwIiwic2V0Rml0VmlldyIsIl90aGlzMyIsInBsdWdpbiIsInBvbHlMaW5lIiwid2luZG93IiwiQU1hcCIsIk1vdXNlVG9vbCIsImZpbGxDb2xvciIsInN0cm9rZUNvbG9yIiwiZmlsbE9wYWNpdHkiLCJvbiIsImUiLCJwYXRoIiwib2JqIiwiZ2V0UGF0aCIsImxuZyIsImxhdCIsInNldFN0YXRlIiwiX2V4dGVuZHMiLCJjbG9zZSIsInBvbHlnb25MaXN0IiwicGF0aHMiLCJsbmdzIiwicG9pIiwibGF0cyIsIk1hdGgiLCJtaW4iLCJhcHBseSIsIm1heCIsIl9zdGF0ZSIsImFxIiwiaXRlbSIsImluZGV4IiwiY29uc29sZSIsImxvZyIsInZhbHVlcyIsImxlbmd0aCIsImZvckVhY2giLCJ2YWx1ZSIsImZpbHRlciIsIl90aGlzNCIsInBvbHlnb25JbmRleCIsIlBvbHlFZGl0b3IiLCJvcGVuIiwiX3RoaXM1IiwiY29tcGFyZSIsImhpZGVMaXN0IiwicG9seWdvbjEiLCJwb2x5Z29uUGF0aCIsInBvbHlnb24xUGF0aCIsImlzUmluZ0luUmluZyIsIkdlb21ldHJ5VXRpbCIsImRvZXNSaW5nUmluZ0ludGVyc2VjdCIsInJpbmdSaW5nQ2xpcCIsInJpbmdBcmVhIiwicGFyc2VJbnQiLCJjYW5TYXZlIiwiX21lc3NhZ2UzIiwiZXJyb3IiLCJfdGhpczYiLCJfc3RhdGUyIiwibWFya2VyTGlzdCIsImNvdW50UG9seWdvbkNlbnRlciIsInBsYWluT3B0aW9ucyIsIkFycmF5IiwiZnJvbSIsInYiLCJrIiwibWFwSGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJfcmVhY3QyIiwiY3JlYXRlRWxlbWVudCIsInN0eWxlIiwid2lkdGgiLCJoZWlnaHQiLCJwb3NpdGlvbiIsImNsYXNzTmFtZSIsInN0eWxlcyIsIm9uQ2xpY2siLCJjcmF0ZVBvbHkiLCJiaW5kIiwidG9nZ2xlRWRpdExpc3QiLCJ0b2dnbGVDbGVhckxpc3QiLCJzYXZlUG9seWdvbiIsIm9uQ2hhbmdlIiwib25DaGVja2JveENoYW5nZSIsImNsZWFyUG9seWdvbiIsInR5cGUiLCJubyIsImVkaXRQb2x5Z29uIiwiYXBwS2V5IiwiYm91bmRzIiwiZGVmYXVsdEN1cnNvciIsIm1hcFN0eWxlIiwib25Db21wbGV0ZSIsIm9uTWFwQ29tcGxldGUiLCJ6b29tIiwiUG9seWdvbiIsIm9uUG9seWdvbkNvbXBsZXRlIiwiTWFya2VyIiwib2Zmc2V0IiwiYnViYmxlIiwib3RoZXJQb2x5Z29uQ29tcGxldGUiXSwibWFwcGluZ3MiOiIrS0FBQSxRQUFBQSxFQUFBQyxFQUFBLEtBRUFDLEVBQUFELEVBQUEseUNBQ0FFLEVBQUFGLEVBQUEsd0NBSUVHLEVBQ0VDLFFBREZELFVBR0lFLEVBQWtCLFNBQUNDLEVBQU9DLEdBQzlCLE9BQ0VDLE1BQU9GLEVBQU1HLEtBQUtELFFBSWhCRSxFQUFxQixTQUFDQyxFQUFVSixHQUNwQyxPQUNFSyxzQkFBdUIsV0FDckJELEVBQVNSLFFBU01VLEdBSnBCLEVBQUFkLEVBQUFlLFNBQVFULEVBQWlCSyxtckJBSWFLLDhCQUFsQkYsbURBckJuQlYscUVBR0lFLDJFQU1BSyw4RUFZZUcsNEdDNUJyQkcsRUFBQUMsRUFBQUQsUUFBQWhCLEVBQUEsR0FBQUEsRUFBQSxJQUtBa0IsTUFBQUQsRUFBQUUsRUFBQSx5a0NBQThsQyxLQUc5bENILEVBQUFJLFFBQ0FDLE9BQUEsZUFDQUMsWUFBQSxvQkFDQUMsYUFBQSxxQkFDQUMsYUFBQSwyQ0NYQSxJQUFBQyxFQUFBekIsRUFBQSxLQUVBLGlCQUFBeUIsUUFBQVIsRUFBQUUsRUFBQU0sRUFBQSxNQU9BLElBQUFDLEdBQWVDLEtBQUEsRUFFZkMsZUFQQUEsRUFRQUMsZ0JBQUFDLEdBRUFDLEVBQUEvQixFQUFBLEdBQUFBLENBQUF5QixFQUFBQyxHQUVBRCxFQUFBTCxTQUFBSCxFQUFBRCxRQUFBUyxFQUFBTCxRQUdBSCxFQUFBZSxJQUFBQyxPQUFBLGFBQUFDLElBQUEsV0FDQSxJQUFBQyxFQUFBbkMsRUFBQSxLQWlCQSxHQWZBLGlCQUFBbUMsUUFBQWxCLEVBQUFFLEVBQUFnQixFQUFBLE9BRUEsU0FBQUMsRUFBQUMsR0FDQSxJQUFBQyxFQUFBQyxFQUFBLEVBRUEsSUFBQUQsS0FBQUYsRUFBQSxDQUNBLElBQUFDLEdBQUFELEVBQUFFLEtBQUFELEVBQUFDLEdBQUEsU0FDQUMsSUFHQSxJQUFBRCxLQUFBRCxFQUFBRSxJQUVBLFdBQUFBLEVBVkEsQ0FXR2QsRUFBQUwsT0FBQWUsRUFBQWYsUUFFSCxVQUFBb0IsTUFBQSx1REFFQVQsRUFBQUksR0FwQkEsS0F1QkFsQixFQUFBZSxJQUFBUyxRQUFBLFdBQWdDVixnM0JDM0NoQyxJQUFBVyxPQUFBMUMsb0JBQUEsMENBRUEyQyxVQUFBM0Msb0JBQUEsa0RBQ0E0QyxrQkFBQTVDLG9CQUFBLDY1QkFLQSxJQUFNNkMsWUFBY0MsU0FBQUMsUUFBT0MsTUFDckJDLGNBQWdCQyxXQUFBSCxRQUFTQyxNQUN6QkcsU0FBVyxtQ0FDWEMsV0FBYSxpREFDZkMsa0JBQ0FDLGlCQUtFQywwQkFLSixTQUFBQSxLQUFZQyxHQUFPQyxnQkFBQUMsS0FBQUgsTUFBQSxJQUFBSSxFQUFBQywyQkFBQUYsTUFBQUgsS0FBQU0sV0FBQUMsT0FBQUMsZUFBQVIsT0FBQVMsS0FBQU4sS0FDWEYsSUFEVyxPQUFBRyxFQTJGbkJNLFdBM0ZtQk4sRUE0Rm5CTyxnQkExRkVQLEVBQUtyRCxPQUNINkQsV0FBT3JDLEVBQ1BzQyxpQkFDQUMsaUJBQWlCLEVBQ2pCQyxnQkFBZ0IsRUFDaEJDLFlBRUssV0FBWSxZQUNaLFNBQVUsWUFDVixXQUFZLFlBQ1osV0FBWSxZQUNaLFdBQVksY0FHWixXQUFZLFlBQ1osV0FBWSxXQUNaLFdBQVksWUFDWixXQUFZLFlBQ1osV0FBWSxXQUNaLFdBQVksWUFDWixXQUFZLGNBSVosV0FBWSxZQUNaLFdBQVksWUFDWixXQUFZLFlBQ1osV0FBWSxZQUNaLFdBQVksWUFDWixVQUFXLFlBQ1gsV0FBWSxZQUNaLFdBQVksY0FHWixXQUFZLFlBQ1osV0FBWSxZQUNaLFdBQVksWUFDWixXQUFZLFlBQ1osV0FBWSxZQUNaLFdBQVksV0FDWixXQUFZLFlBQ1osV0FBWSxZQUNaLFdBQVksWUFDWixXQUFZLGFBR2pCQyxpQkFFSyxXQUFZLFlBQ1osV0FBWSxZQUNaLFdBQVksWUFDWixXQUFZLFlBQ1osV0FBWSxZQUNaLFdBQVksY0FHWixXQUFZLFlBQ1osV0FBWSxZQUNaLFdBQVksWUFDWixXQUFZLFlBQ1osV0FBWSxZQUNaLFdBQVksY0FHWixXQUFZLFdBQ1osV0FBWSxZQUNaLFdBQVksV0FDWixXQUFZLFdBQ1osV0FBWSxZQUNaLFdBQVksYUFHWixXQUFZLFlBQ1osV0FBWSxZQUNaLFdBQVksWUFDWixVQUFXLFlBQ1gsV0FBWSxhQUdqQm5ELFNBQ0csV0FBWSxZQUNaLFdBQVksWUFDWixXQUFZLFlBQ1osV0FBWSxZQUNaLFdBQVksYUF0RkFzQyxnR0FrR0FjLEdBQVcsSUFBQUMsRUFBQWhCLEtBQzVCaUIsV0FBVyxXQUNURCxFQUFLRSxLQUFPRixFQUFLRSxJQUFJQyxjQUNwQix5Q0FNTyxJQUFBQyxFQUFBcEIsS0FDVkEsS0FBS2tCLElBQUlHLFFBQVEsa0JBQW1CLFdBQ2xDLElBQU1DLEVBQVcsSUFBSUMsT0FBT0MsS0FBS0MsVUFBVUwsRUFBS0YsS0FDaERJLEVBQVNmLFNBQ1BtQixVQUFXLFVBQ1hDLFlBQWEsVUFDYkMsWUFBYSxRQUVmTixFQUFTTyxHQUFHLE9BQVEsU0FBQ0MsR0FDbkIsSUFBTUMsRUFBT0QsRUFBRUUsSUFBSUMsVUFBVWYsSUFBSSxTQUFDdkQsR0FBRCxPQUFjQSxFQUFPdUUsSUFBS3ZFLEVBQU93RSxPQUNsRWYsRUFBS2dCLFNBQUxDLFlBQ0tqQixFQUFLeEUsT0FDUmlFLHNDQUNLTyxFQUFLeEUsTUFBTWlFLFdBQ2RrQixPQUdKVCxFQUFTZ0IsT0FBTSxrREFXRkMsR0FDakIsT0FBT0EsRUFBWXJCLElBQUksU0FBQ3NCLEdBQ3RCLElBQU1DLEVBQU9ELEVBQU10QixJQUFJLFNBQUN3QixHQUFELE9BQVVBLEVBQUksSUFBTUEsRUFBSVIsTUFDekNTLEVBQU9ILEVBQU10QixJQUFJLFNBQUN3QixHQUFELE9BQVVBLEVBQUksSUFBTUEsRUFBSVAsTUFHL0MsT0FGd0UsSUFBM0RTLEtBQUtDLElBQUlDLE1BQU0sS0FBTUwsR0FBUUcsS0FBS0csSUFBSUQsTUFBTSxLQUFNTCxJQUNTLElBQTNERyxLQUFLQyxJQUFJQyxNQUFNLEtBQU1ILEdBQVFDLEtBQUtHLElBQUlELE1BQU0sS0FBTUgsOENBVWpFL0MsVUFBWSxLQURDLElBQUFvRCxFQUVxQmhELEtBQUtwRCxNQUFoQzhELEVBRk1zQyxFQUVOdEMsY0FBZUcsRUFGVG1DLEVBRVNuQyxTQUN0QixHQUFJbEIsV0FBWSxDQUNkLElBQU1ZLEVBQVVaLFdBQVdzRCxHQUFHLEdBQUcvQixJQUFJLFNBQUN2RCxHQUFELE9BQWNBLEVBQU91RSxJQUFLdkUsRUFBT3dFLE9BQ3RFbkMsS0FBS29DLFNBQUxDLFlBQ0tyQyxLQUFLcEQsT0FDUmlFLFNBQVViLEtBQUtwRCxNQUFNaUUsU0FBU0ssSUFBSSxTQUFDZ0MsRUFBTUMsR0FDdkMsT0FBT0EsSUFBVXZELFVBQVlXLEVBQVUyQyxPQUczQ3ZELFdBQVcyQyxRQUViYyxRQUFRQyxJQUFJM0MsR0FDWixJQUFJNEMsRUFBU3pDLEVBQ1RILEVBQWM2QyxPQUFTLEdBQ3pCN0MsRUFBYzhDLFFBQVEsU0FBQ0MsR0FDckJILEVBQVNBLEVBQU9JLE9BQU8sU0FBQ1IsRUFBTUMsR0FDNUIsT0FBUUEsRUFBUSxLQUFRTSxNQUk5QkwsUUFBUUMsSUFBSUMsR0FDWnRELEtBQUtvQyxTQUFMQyxZQUNLckMsS0FBS3BELE9BQ1JpRSxTQUFVeUMsRUFDVjNDLGlCQUFpQix5Q0FRVHdDLEdBQU8sSUFBQVEsRUFBQTNELEtBRWpCLEdBREFKLFVBQVl1RCxFQUNSeEQsV0FBWSxDQUNkLElBQU1ZLEVBQVVaLFdBQVdzRCxHQUFHLEdBQUcvQixJQUFJLFNBQUN2RCxHQUFELE9BQWNBLEVBQU91RSxJQUFLdkUsRUFBT3dFLE9BQ3RFbkMsS0FBS29DLFNBQUxDLFlBQ0tyQyxLQUFLcEQsT0FDUmlFLFNBQVViLEtBQUtwRCxNQUFNaUUsU0FBU0ssSUFBSSxTQUFDZ0MsRUFBTUMsR0FDdkMsT0FBT0EsSUFBVXZELFVBQVlXLEVBQVUyQyxPQUczQ3ZELFdBQVcyQyxRQUViLElBQUkvQixFQUFVUCxLQUFLTyxRQUFRNEMsR0FDM0JuRCxLQUFLNEQsYUFBZVQsRUFDcEJuRCxLQUFLa0IsSUFBSUcsUUFBUSxtQkFBb0IsWUFFbkMxQixXQUFhLElBQUk0QixPQUFPQyxLQUFLcUMsV0FBV0YsRUFBS3pDLElBQUtYLElBR3ZDdUQsU0FFYjlELEtBQUtMLFdBQWFBLGlEQU9OdUIsR0FDWmxCLEtBQUtrQixJQUFNQSxFQUNYbEIsS0FBS2tCLElBQUlDLG1EQU1HLElBQUE0QyxFQUFBL0QsS0FDTGEsRUFBWWIsS0FBS3BELE1BQWpCaUUsU0FDUCxHQUFJbEIsV0FBWSxDQUNkLElBQUlxRSxTQUtKLEdBSkFoRSxLQUFLUSxhQUFhVSxJQUFJLFNBQUNnQyxHQUNyQmMsRUFBVUQsRUFBS0MsUUFBUWQsRUFBTWEsRUFBS3hELFFBQVFYLGNBRTVDQSxVQUFZLE1BQ1BvRSxFQUNILE9BRUYsSUFBTXpELEVBQVVaLFdBQVdzRCxHQUFHLEdBQUcvQixJQUFJLFNBQUN2RCxHQUFELE9BQWNBLEVBQU91RSxJQUFLdkUsRUFBT3dFLE9BQ3RFbkMsS0FBS29DLFNBQUxDLFlBQ0tyQyxLQUFLcEQsT0FDUmlFLFNBQVVBLEVBQVNLLElBQUksU0FBQ2dDLEVBQU1DLEdBQzVCLE9BQU9BLElBQVV2RCxVQUFZVyxFQUFVMkMsT0FJM0N2RCxXQUFXMkMsUUFDWHRDLEtBQUtpRSxXQUNMdEUsV0FBYSxzQ0FVVFksRUFBUzJELEdBQ2YsSUFBTUMsRUFBYzVELEVBQVEwQixVQUN0Qm1DLEVBQWVGLEVBQVNqQyxVQUV4Qm9DLEVBQWU5QyxPQUFPQyxLQUFLOEMsYUFBYUQsYUFBYUQsRUFBY0QsR0FFbkVJLEVBQXdCaEQsT0FBT0MsS0FBSzhDLGFBQWFDLHNCQUFzQkgsRUFBY0QsR0FDckZLLEVBQWVqRCxPQUFPQyxLQUFLOEMsYUFBYUUsYUFBYUosRUFBY0QsR0FDbkVNLEVBQVdDLFNBQVNuRCxPQUFPQyxLQUFLOEMsYUFBYUcsU0FBU0QsSUFDeERHLEdBQVUsRUFRZCxPQVBJTixHQUNGTyxVQUFBdkYsUUFBUXdGLE1BQU0sYUFDZEYsR0FBVSxHQUNESixJQUNUSyxVQUFBdkYsUUFBUXdGLE1BQU0scUJBQXVCSixFQUFXLE9BQ2hERSxHQUFVLEdBRUxBLDRDQVFTeEIsRUFBT2pDLEVBQUtYLEdBQzVCUCxLQUFLTyxRQUFRNEMsR0FBUzVDLCtDQVFINEMsRUFBT2pDLEVBQUtYLEdBQy9CUCxLQUFLUSxhQUFhaEQsS0FBSytDLDZDQVVDLElBRnBCUCxLQUFLcEQsTUFEUGlFLFNBR1cwQyxRQUlidkQsS0FBS29DLFVBQ0h6QixpQkFBa0JYLEtBQUtwRCxNQUFNK0QsZ0JBQzdCQyxnQkFBZ0IsNkNBV00sSUFGcEJaLEtBQUtwRCxNQURQaUUsU0FHVzBDLFFBSWJ2RCxLQUFLb0MsVUFDSHpCLGlCQUFpQixFQUNqQkMsZ0JBQWlCWixLQUFLcEQsTUFBTWdFLG9EQU85QlosS0FBS29DLFVBQ0h6QixpQkFBaUIsRUFDakJDLGdCQUFnQiw2Q0FPSEYsR0FDZlYsS0FBS29DLFVBQVUxQixtREFNUixJQUFBb0UsRUFBQTlFLEtBQUErRSxFQUMyRS9FLEtBQUtwRCxNQUFoRjZELEVBREFzRSxFQUNBdEUsTUFBT0ksRUFEUGtFLEVBQ09sRSxTQUFVQyxFQURqQmlFLEVBQ2lCakUsY0FBZUYsRUFEaENtRSxFQUNnQ25FLGVBQWdCRCxFQURoRG9FLEVBQ2dEcEUsZ0JBQWlCaEQsRUFEakVvSCxFQUNpRXBILE9BQ2xFcUgsRUFBYWhGLEtBQUtpRixtQkFBbUJwRSxHQUVyQ3FFLEVBQWVDLE1BQU1DLE1BQU03QixPQUFReUIsRUFBV3pCLFNBQVNyQyxJQUFJLFNBQUNtRSxFQUFHQyxHQUFKLFVBQWFBLEVBQUksS0FDNUVDLEVBQStDLEtBQWxDLEVBQUssSUFBTWhFLE9BQU9pRSxhQUNyQyxPQUNFQyxRQUFBcEcsUUFBQXFHLGNBQUEsT0FBS0MsT0FBUUMsTUFBTyxPQUFRQyxPQUFXTixFQUFYLEtBQTBCTyxTQUFVLGNBQzlETCxRQUFBcEcsUUFBQXFHLGNBQUN2RyxhQUFZNEcsVUFBV0MsbUJBQU9wSSxhQUM3QjZILFFBQUFwRyxRQUFBcUcsY0FBQXRHLFNBQUFDLFNBQVE0RyxRQUFTakcsS0FBS2tHLFVBQVVDLEtBQUtuRyxPQUFyQyxNQUNBeUYsUUFBQXBHLFFBQUFxRyxjQUFBdEcsU0FBQUMsU0FBUTRHLFFBQVNqRyxLQUFLb0csZUFBZUQsS0FBS25HLE9BQTFDLE1BQ0F5RixRQUFBcEcsUUFBQXFHLGNBQUF0RyxTQUFBQyxTQUFRNEcsUUFBU2pHLEtBQUtxRyxnQkFBZ0JGLEtBQUtuRyxPQUEzQyxNQUNBeUYsUUFBQXBHLFFBQUFxRyxjQUFBdEcsU0FBQUMsU0FBUTRHLFFBQVNqRyxLQUFLc0csWUFBWUgsS0FBS25HLE9BQXZDLE9BR0FXLEdBQ0E4RSxRQUFBcEcsUUFBQXFHLGNBQUEsT0FBS0ssVUFBV0MsbUJBQU9uSSxjQUNyQjRILFFBQUFwRyxRQUFBcUcsY0FBQ25HLGVBQWN2QixRQUFTa0gsRUFBY3FCLFNBQVV2RyxLQUFLd0csaUJBQWlCTCxLQUFLbkcsUUFDM0V5RixRQUFBcEcsUUFBQXFHLGNBQUF0RyxTQUFBQyxTQUNFNEcsUUFBU2pHLEtBQUt5RyxhQUFhTixLQUFLbkcsTUFDaEMwRyxLQUFLLFdBRlAsT0FTRjlGLEdBQ0E2RSxRQUFBcEcsUUFBQXFHLGNBQUEsT0FBS0ssVUFBV0MsbUJBQU9sSSxjQUVuQm9ILEVBQWFoRSxJQUFJLFNBQUN5RixHQUFELE9BQ2ZsQixRQUFBcEcsUUFBQXFHLGNBQUF0RyxTQUFBQyxTQUNFNEcsUUFBU25CLEVBQUs4QixZQUFZVCxLQUFLckIsRUFBTTZCLEdBQ3JDL0gsSUFBSytILEdBRUpBLE1BTVhsQixRQUFBcEcsUUFBQXFHLGNBQUN4RyxrQkFBQXNDLE1BQ0NxRixPQUFRcEgsU0FDUnFILE9BQVFyRyxFQUNSc0csY0FBYyxVQUNkQyxTQUFVdEgsV0FDVnVILFdBQVlqSCxLQUFLa0gsY0FBY2YsS0FBS25HLE1BQ3BDaUcsUUFBU2pHLEtBQUtpRSxTQUFTa0MsS0FBS25HLE1BQzVCbUgsS0FBTSxJQUdKdEcsRUFBU0ssSUFBSSxTQUFDYSxFQUFNb0IsR0FBUCxPQUNYc0MsUUFBQXBHLFFBQUFxRyxjQUFDeEcsa0JBQUFrSSxTQUNDeEksSUFBS3VFLEVBQ0x6QixVQUFVLFVBQ1ZDLFlBQVksVUFDWkMsWUFBWSxNQUNaRyxLQUFNQSxFQUNOa0YsV0FBWW5DLEVBQUt1QyxrQkFBa0JsQixLQUFLckIsRUFBTTNCLEVBQVEsT0FLMUQ2QixFQUFXOUQsSUFBSSxTQUFDNEUsRUFBVTNDLEdBQVgsT0FDYnNDLFFBQUFwRyxRQUFBcUcsY0FBQ3hHLGtCQUFBb0ksUUFDQ3ZKLFFBQUEsZUFDaUJpSSxtQkFBT3JJLE9BRHhCLDRCQUVNd0YsRUFBUSxHQUZkLDZCQUtBdkUsSUFBS3VFLEVBQ0xvRSxTQUFVLElBQUssSUFDZnpCLFNBQVVBLE1BS2RoRixFQUFjSSxJQUFJLFNBQUNhLEVBQU1vQixHQUFQLE9BQ2hCc0MsUUFBQXBHLFFBQUFxRyxjQUFDeEcsa0JBQUFrSSxTQUNDeEksSUFBS3VFLEVBQ0xwQixLQUFNQSxFQUNOSixZQUFZLFVBQ1pELFVBQVUsUUFDVkUsWUFBWSxNQUNaNEYsUUFBUSxFQUNSUCxXQUFZbkMsRUFBSzJDLHFCQUFxQnRCLEtBQUtyQixFQUFNM0IsRUFBUSxPQUs3RHhGLEVBQU91RCxJQUFJLFNBQUN2RCxFQUFRd0YsR0FBVCxPQUNUc0MsUUFBQXBHLFFBQUFxRyxjQUFDeEcsa0JBQUFvSSxRQUNDMUksSUFBS3VFLEVBQ0wyQyxTQUFVbkksRUFDVjRKLFNBQVUsSUFBSyw2SUF4YlpsSywyQkFpY0p3QywrTEEzY1RWLDhGQUNBSSxrR0FDQUUsd0ZBQ0FDLDRGQUNGQyw0RkFDQUMsMEZBS0VDIiwiZmlsZSI6ImpzLzEuMmM3NmRjNDgyOGMwZTRkOTQ5ZTUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2Nvbm5lY3R9IGZyb20gJ3JlYWN0LXJlZHV4JztcclxuXHJcbmltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9jb21wb25lbnQnO1xyXG5pbXBvcnQge1xyXG4gIGFzeW5jLFxyXG59IGZyb20gJy4vYWN0aW9ucyc7XHJcbmNvbnN0IHtcclxuICBzb21lQXN5bmMsXHJcbn0gPSBhc3luYztcclxuXHJcbmNvbnN0IG1hcFN0YXRlVG9Qcm9wcyA9IChzdGF0ZSwgb3duUHJvcHMpID0+IHtcclxuICByZXR1cm4ge1xyXG4gICAgY291bnQ6IHN0YXRlLmxpc3QuY291bnQsXHJcbiAgfTtcclxufTtcclxuXHJcbmNvbnN0IG1hcERpc3BhdGNoVG9Qcm9wcyA9IChkaXNwYXRjaCwgb3duUHJvcHMpID0+IHtcclxuICByZXR1cm4ge1xyXG4gICAgZmV0Y2hTb21lQXN5bmNSZXF1ZXN0OiAoKSA9PiB7XHJcbiAgICAgIGRpc3BhdGNoKHNvbWVBc3luYygpKTtcclxuICAgIH0sXHJcbiAgfTtcclxufTtcclxuXHJcbkBjb25uZWN0KG1hcFN0YXRlVG9Qcm9wcywgbWFwRGlzcGF0Y2hUb1Byb3BzKVxyXG4vKipcclxuICogQ29ubmVjdGVkIHJlYWN0IGNvbXBvbmVudFxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29udGFpbmVyIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuXHJcbn1cclxuIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKShmYWxzZSk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIubWFya2VyXzM1VXY1IHtcXG4gIHdpZHRoOiAxOHB4O1xcbiAgaGVpZ2h0OiAxOHB4O1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gIGZvbnQtc2l6ZTogMTJweDtcXG4gIGJvcmRlcjogMXB4IHNvbGlkO1xcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xcbn1cXG4uYnV0dG9uR3JvdXBfVDZfeVkge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgdG9wOiA5MHB4O1xcbiAgcmlnaHQ6IDIwcHg7XFxuICB6LWluZGV4OiA5OTk7XFxufVxcbi5idXR0b25Hcm91cDJfb0RySVEge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgdG9wOiAxMjJweDtcXG4gIHJpZ2h0OiA4M3B4O1xcbiAgei1pbmRleDogOTk5O1xcbn1cXG4uYnV0dG9uR3JvdXAyX29EcklRIC5hbnQtY2hlY2tib3gtZ3JvdXAtaXRlbSB7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gIG1hcmdpbi1yaWdodDogMHB4O1xcbiAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcXG4gIHBhZGRpbmc6IDRweCA4cHg7XFxuICBib3JkZXItcmFkaXVzOiAzcHg7XFxufVxcbi5idXR0b25Hcm91cDJfb0RySVEgLmFudC1jaGVja2JveC1ncm91cCB7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gIGJhY2tncm91bmQ6IHdoaXRlO1xcbn1cXG4uYnV0dG9uR3JvdXAyX29EcklRIC5hbnQtY2hlY2tib3gtZ3JvdXAtaXRlbSA+IHNwYW46bGFzdC1jaGlsZCB7XFxuICB3aWR0aDogMThweDtcXG4gIGhlaWdodDogMThweDtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICBib3JkZXI6IDFweCBzb2xpZDtcXG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcXG4gIGZvbnQtc2l6ZTogMTJweDtcXG59XFxuLmJ1dHRvbkdyb3VwM18yUElZSCB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB0b3A6IDEyMnB4O1xcbiAgcmlnaHQ6IDE0NnB4O1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxuICB6LWluZGV4OiA5OTk7XFxufVxcblwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcbmV4cG9ydHMubG9jYWxzID0ge1xuXHRcIm1hcmtlclwiOiBcIm1hcmtlcl8zNVV2NVwiLFxuXHRcImJ1dHRvbkdyb3VwXCI6IFwiYnV0dG9uR3JvdXBfVDZfeVlcIixcblx0XCJidXR0b25Hcm91cDJcIjogXCJidXR0b25Hcm91cDJfb0RySVFcIixcblx0XCJidXR0b25Hcm91cDNcIjogXCJidXR0b25Hcm91cDNfMlBJWUhcIlxufTsiLCJcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanM/P3JlZi0tNC0xIS4uLy4uL25vZGVfbW9kdWxlcy9sZXNzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cmVmLS00LTIhLi9wbGF0Zm9ybS5sZXNzXCIpO1xuXG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblxudmFyIHRyYW5zZm9ybTtcbnZhciBpbnNlcnRJbnRvO1xuXG5cblxudmFyIG9wdGlvbnMgPSB7XCJobXJcIjp0cnVlfVxuXG5vcHRpb25zLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVxub3B0aW9ucy5pbnNlcnRJbnRvID0gdW5kZWZpbmVkO1xuXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanNcIikoY29udGVudCwgb3B0aW9ucyk7XG5cbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXG5pZihtb2R1bGUuaG90KSB7XG5cdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz8/cmVmLS00LTEhLi4vLi4vbm9kZV9tb2R1bGVzL2xlc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9yZWYtLTQtMiEuL3BsYXRmb3JtLmxlc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz8/cmVmLS00LTEhLi4vLi4vbm9kZV9tb2R1bGVzL2xlc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9yZWYtLTQtMiEuL3BsYXRmb3JtLmxlc3NcIik7XG5cblx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblxuXHRcdHZhciBsb2NhbHMgPSAoZnVuY3Rpb24oYSwgYikge1xuXHRcdFx0dmFyIGtleSwgaWR4ID0gMDtcblxuXHRcdFx0Zm9yKGtleSBpbiBhKSB7XG5cdFx0XHRcdGlmKCFiIHx8IGFba2V5XSAhPT0gYltrZXldKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdGlkeCsrO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3Ioa2V5IGluIGIpIGlkeC0tO1xuXG5cdFx0XHRyZXR1cm4gaWR4ID09PSAwO1xuXHRcdH0oY29udGVudC5sb2NhbHMsIG5ld0NvbnRlbnQubG9jYWxzKSk7XG5cblx0XHRpZighbG9jYWxzKSB0aHJvdyBuZXcgRXJyb3IoJ0Fib3J0aW5nIENTUyBITVIgZHVlIHRvIGNoYW5nZWQgY3NzLW1vZHVsZXMgbG9jYWxzLicpO1xuXG5cdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHR9KTtcblxuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn0iLCJpbXBvcnQgUmVhY3QsIHtDb21wb25lbnR9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHtCdXR0b24sIG1lc3NhZ2UsIENoZWNrYm94fSBmcm9tICdhbnRkJztcclxuaW1wb3J0IHN0eWxlcyBmcm9tICcuL3BsYXRmb3JtLmxlc3MnO1xyXG5pbXBvcnQge1xyXG4gIEFNYXAsXHJcbiAgTWFya2VyLFxyXG4gIFBvbHlnb24sXHJcbn0gZnJvbSAncmVhY3QtYW1hcC1iaW5kaW5nJztcclxuY29uc3QgQnV0dG9uR3JvdXAgPSBCdXR0b24uR3JvdXA7XHJcbmNvbnN0IENoZWNrYm94R3JvdXAgPSBDaGVja2JveC5Hcm91cDtcclxuY29uc3QgQU1BUF9LRVkgPSAnOTY0ZmZhYjJlZjFlZGNhMTJjOTdmODE3MzQyYzQzMTUnO1xyXG5jb25zdCBBTUFQX1NUWUxFID0gJ2FtYXA6Ly9zdHlsZXMvOWMxMDljYmYyZTBmNTU3MDFjNmVjNGU1YzkwYzU2YmEnO1xyXG5sZXQgcG9seUVkaXRvcjtcclxubGV0IGVkaXRJbmRleDtcclxuXHJcbi8qKlxyXG4gKiBMaXN0XHJcbiAqL1xyXG5jbGFzcyBMaXN0IGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAvKipcclxuICAgKiBbY29uc3RydWN0b3IgZGVzY3JpcHRpb25dXHJcbiAgICogQHBhcmFtICB7W3R5cGVdfSBwcm9wcyBbZGVzY3JpcHRpb25dXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIGJvdW5kOiB1bmRlZmluZWQsXHJcbiAgICAgIGNoZWNrZWRWYWx1ZXM6IFtdLFxyXG4gICAgICBpc1Nob3dDbGVhckxpc3Q6IGZhbHNlLFxyXG4gICAgICBpc1Nob3dFZGl0TGlzdDogZmFsc2UsXHJcbiAgICAgIG1pbGtBcmVhOiBbXHJcbiAgICAgICAgW1xyXG4gICAgICAgICAgWzEyMC4xODkyNjgsIDMwLjIwNTI5N10sXHJcbiAgICAgICAgICBbMTIwLjE5MTUsIDMwLjIwMTU4OF0sXHJcbiAgICAgICAgICBbMTIwLjE5ODc5NiwgMzAuMjA1Mjk3XSxcclxuICAgICAgICAgIFsxMjAuMTk2ODIxLCAzMC4yMDg2MzVdLFxyXG4gICAgICAgICAgWzEyMC4xODkyNjgsIDMwLjIwNTI5N10sXHJcbiAgICAgICAgXSxcclxuICAgICAgICBbXHJcbiAgICAgICAgICBbMTIwLjE5Mzk4OSwgMzAuMTk3Mjg1XSxcclxuICAgICAgICAgIFsxMjAuMjAxMTEzLCAzMC4yMDA5Ml0sXHJcbiAgICAgICAgICBbMTIwLjIwMjU3MiwgMzAuMTk4MDI3XSxcclxuICAgICAgICAgIFsxMjAuMjAyNjU4LCAzMC4xOTYwOThdLFxyXG4gICAgICAgICAgWzEyMC4yMDI2NTgsIDMwLjE5MTg3XSxcclxuICAgICAgICAgIFsxMjAuMTk1Mjc2LCAzMC4xOTEyMDJdLFxyXG4gICAgICAgICAgWzEyMC4xOTM5ODksIDMwLjE5NzI4NV0sXHJcblxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgW1xyXG4gICAgICAgICAgWzEyMC4yMDY0MzQsIDMwLjIwOTE1NF0sXHJcbiAgICAgICAgICBbMTIwLjIwODgzOCwgMzAuMjA1MDc0XSxcclxuICAgICAgICAgIFsxMjAuMjE2NjQ4LCAzMC4yMDkyMjhdLFxyXG4gICAgICAgICAgWzEyMC4yMTMzMDEsIDMwLjIxMzgyN10sXHJcbiAgICAgICAgICBbMTIwLjIxMDgxMiwgMzAuMjE2NTcxXSxcclxuICAgICAgICAgIFsxMjAuMjA4NTgsIDMwLjIxNDA0OV0sXHJcbiAgICAgICAgICBbMTIwLjIwNDIwMywgMzAuMjExOTczXSxcclxuICAgICAgICAgIFsxMjAuMjA2NDM0LCAzMC4yMDkxNTRdLFxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgW1xyXG4gICAgICAgICAgWzEyMC4yMDk5NTQsIDMwLjE5ODY5NV0sXHJcbiAgICAgICAgICBbMTIwLjIxODAyMiwgMzAuMTk5OTU2XSxcclxuICAgICAgICAgIFsxMjAuMjE4MTA3LCAzMC4xOTQ0NjZdLFxyXG4gICAgICAgICAgWzEyMC4yMjg0MDcsIDMwLjE5NTEzNF0sXHJcbiAgICAgICAgICBbMTIwLjIyOTA5NCwgMzAuMTk1MjA4XSxcclxuICAgICAgICAgIFsxMjAuMjI4ODM2LCAzMC4xOTE4N10sXHJcbiAgICAgICAgICBbMTIwLjIxODYyMiwgMzAuMTkyMTY3XSxcclxuICAgICAgICAgIFsxMjAuMjE4MzY1LCAzMC4xOTAwODldLFxyXG4gICAgICAgICAgWzEyMC4yMTA5ODMsIDMwLjE4OTY0NF0sXHJcbiAgICAgICAgICBbMTIwLjIwOTk1NCwgMzAuMTk4Njk1XSxcclxuICAgICAgICBdLFxyXG4gICAgICBdLFxyXG4gICAgICBvdGhlck1pbGtBcmVhOiBbXHJcbiAgICAgICAgW1xyXG4gICAgICAgICAgWzEyMC4yMjQyMDEsIDMwLjIxMzM4Ml0sXHJcbiAgICAgICAgICBbMTIwLjIzMjI2OSwgMzAuMjE3MTY0XSxcclxuICAgICAgICAgIFsxMjAuMjM1MDE2LCAzMC4yMTE1MjddLFxyXG4gICAgICAgICAgWzEyMC4yMzQ1MDEsIDMwLjIwNjU1OF0sXHJcbiAgICAgICAgICBbMTIwLjIyOTA5NCwgMzAuMjA2MTg3XSxcclxuICAgICAgICAgIFsxMjAuMjI0MjAxLCAzMC4yMTMzODJdLFxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgW1xyXG4gICAgICAgICAgWzEyMC4yMzQ0MTUsIDMwLjIwMDQ3NV0sXHJcbiAgICAgICAgICBbMTIwLjIzNDY3MywgMzAuMjAxMjkxXSxcclxuICAgICAgICAgIFsxMjAuMjQwNjgxLCAzMC4yMDEwNjldLFxyXG4gICAgICAgICAgWzEyMC4yNDE3OTcsIDMwLjE5NDMxOF0sXHJcbiAgICAgICAgICBbMTIwLjIzNDU4NywgMzAuMTk0Njg5XSxcclxuICAgICAgICAgIFsxMjAuMjM0NDE1LCAzMC4yMDA0NzVdLFxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgW1xyXG4gICAgICAgICAgWzEyMC4yMzUxODgsIDMwLjE5MTg3XSxcclxuICAgICAgICAgIFsxMjAuMjMzODE0LCAzMC4xODI5NjddLFxyXG4gICAgICAgICAgWzEyMC4yNDQyODYsIDMwLjE4MjY3XSxcclxuICAgICAgICAgIFsxMjAuMjQzNjg1LCAzMC4xOTE4N10sXHJcbiAgICAgICAgICBbMTIwLjIzNTcwMywgMzAuMTkxNDk5XSxcclxuICAgICAgICAgIFsxMjAuMjM1MTg4LCAzMC4xOTE4N10sXHJcbiAgICAgICAgXSxcclxuICAgICAgICBbXHJcbiAgICAgICAgICBbMTIwLjIxMDY4MywgMzAuMTgxNTU3XSxcclxuICAgICAgICAgIFsxMjAuMjExNTQxLCAzMC4xNzYzNjNdLFxyXG4gICAgICAgICAgWzEyMC4yMzE2MjYsIDMwLjE3NTMyNV0sXHJcbiAgICAgICAgICBbMTIwLjIzMTU0LCAzMC4xODMxMTVdLFxyXG4gICAgICAgICAgWzEyMC4yMTA2ODMsIDMwLjE4MTU1N10sXHJcbiAgICAgICAgXSxcclxuICAgICAgXSxcclxuICAgICAgbWFya2VyOiBbXHJcbiAgICAgICAgWzEyMC4yNDM1NDgsIDMwLjE5OTg3MV0sXHJcbiAgICAgICAgWzEyMC4yNDkxNDgsIDMwLjE5OTgxNl0sXHJcbiAgICAgICAgWzEyMC4yNDkyNTYsIDMwLjE5NDQxOV0sXHJcbiAgICAgICAgWzEyMC4yNDM1NjksIDMwLjE5NDUxMV0sXHJcbiAgICAgICAgWzEyMC4yNDM1NDgsIDMwLjE5OTg3MV0sXHJcbiAgICAgIF0sXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgcG9seWdvbiA9IHt9O1xyXG4gIG90aGVyUG9seWdvbiA9IFtdXHJcblxyXG4gIC8qKlxyXG4gICAqIFtjb21wb25lbnREaWRVcGRhdGUgZGVzY3JpcHRpb25dXHJcbiAgICogQHBhcmFtICB7W3R5cGVdfSBwcmV2UHJvcHMgW2Rlc2NyaXB0aW9uXVxyXG4gICAqL1xyXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLm1hcCAmJiB0aGlzLm1hcC5zZXRGaXRWaWV3KCk7XHJcbiAgICB9LCA1MDApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogW2NyYXRlUG9seSBkZXNjcmlwdGlvbl1cclxuICAgKi9cclxuICBjcmF0ZVBvbHkoKSB7XHJcbiAgICB0aGlzLm1hcC5wbHVnaW4oWydBTWFwLk1vdXNlVG9vbCddLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHBvbHlMaW5lID0gbmV3IHdpbmRvdy5BTWFwLk1vdXNlVG9vbCh0aGlzLm1hcCk7XHJcbiAgICAgIHBvbHlMaW5lLnBvbHlnb24oe1xyXG4gICAgICAgIGZpbGxDb2xvcjogJyM4ZGM1ZjMnLFxyXG4gICAgICAgIHN0cm9rZUNvbG9yOiAnIzRmN2RlMycsXHJcbiAgICAgICAgZmlsbE9wYWNpdHk6ICcwLjMnLFxyXG4gICAgICB9KTtcclxuICAgICAgcG9seUxpbmUub24oJ2RyYXcnLCAoZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHBhdGggPSBlLm9iai5nZXRQYXRoKCkubWFwKChtYXJrZXIpID0+IChbbWFya2VyLmxuZywgbWFya2VyLmxhdF0pKTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgIC4uLnRoaXMuc3RhdGUsXHJcbiAgICAgICAgICBtaWxrQXJlYTogW1xyXG4gICAgICAgICAgICAuLi50aGlzLnN0YXRlLm1pbGtBcmVhLFxyXG4gICAgICAgICAgICBwYXRoLFxyXG4gICAgICAgICAgXSxcclxuICAgICAgICB9KTtcclxuICAgICAgICBwb2x5TGluZS5jbG9zZSh0cnVlKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIOiuoeeul3BvbHlnb27liJfooajkuK3lv4PngrlcclxuICAvKipcclxuICAgKiBbY291bnRQb2x5Z29uQ2VudGVyIGRlc2NyaXB0aW9uXVxyXG4gICAqIEBwYXJhbSAge1t0eXBlXX0gcG9seWdvbkxpc3QgW2Rlc2NyaXB0aW9uXVxyXG4gICAqIEByZXR1cm4ge1t0eXBlXX0gICAgICAgICAgICAgW2Rlc2NyaXB0aW9uXVxyXG4gICAqL1xyXG4gIGNvdW50UG9seWdvbkNlbnRlcihwb2x5Z29uTGlzdCkge1xyXG4gICAgcmV0dXJuIHBvbHlnb25MaXN0Lm1hcCgocGF0aHMpID0+IHtcclxuICAgICAgY29uc3QgbG5ncyA9IHBhdGhzLm1hcCgocG9pKSA9PiAocG9pWzBdIHx8IHBvaS5sbmcpKTtcclxuICAgICAgY29uc3QgbGF0cyA9IHBhdGhzLm1hcCgocG9pKSA9PiAocG9pWzFdIHx8IHBvaS5sYXQpKTtcclxuICAgICAgY29uc3QgbG5nID0gKE1hdGgubWluLmFwcGx5KG51bGwsIGxuZ3MpICsgTWF0aC5tYXguYXBwbHkobnVsbCwgbG5ncykpICogMC41O1xyXG4gICAgICBjb25zdCBsYXQgPSAoTWF0aC5taW4uYXBwbHkobnVsbCwgbGF0cykgKyBNYXRoLm1heC5hcHBseShudWxsLCBsYXRzKSkgKiAwLjU7XHJcbiAgICAgIHJldHVybiBbbG5nLCBsYXRdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBbY2xlYXJQb2x5Z29uIGRlc2NyaXB0aW9uXVxyXG4gICAqIEByZXR1cm4ge1t0eXBlXX0gW2Rlc2NyaXB0aW9uXVxyXG4gICAqL1xyXG4gIGNsZWFyUG9seWdvbigpIHtcclxuICAgIGVkaXRJbmRleCA9IG51bGw7XHJcbiAgICBjb25zdCB7Y2hlY2tlZFZhbHVlcywgbWlsa0FyZWF9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGlmIChwb2x5RWRpdG9yKSB7XHJcbiAgICAgIGNvbnN0IHBvbHlnb24gPSBwb2x5RWRpdG9yLmFxWzBdLm1hcCgobWFya2VyKSA9PiAoW21hcmtlci5sbmcsIG1hcmtlci5sYXRdKSk7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgIC4uLnRoaXMuc3RhdGUsXHJcbiAgICAgICAgbWlsa0FyZWE6IHRoaXMuc3RhdGUubWlsa0FyZWEubWFwKChpdGVtLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuIGluZGV4ID09PSBlZGl0SW5kZXggPyBwb2x5Z29uIDogaXRlbTtcclxuICAgICAgICB9KSxcclxuICAgICAgfSk7XHJcbiAgICAgIHBvbHlFZGl0b3IuY2xvc2UoKTtcclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKGNoZWNrZWRWYWx1ZXMpO1xyXG4gICAgbGV0IHZhbHVlcyA9IG1pbGtBcmVhO1xyXG4gICAgaWYgKGNoZWNrZWRWYWx1ZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBjaGVja2VkVmFsdWVzLmZvckVhY2goKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgdmFsdWVzID0gdmFsdWVzLmZpbHRlcigoaXRlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgIHJldHVybiAoaW5kZXggKyAxKSAhPT0gK3ZhbHVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKHZhbHVlcyk7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgLi4udGhpcy5zdGF0ZSxcclxuICAgICAgbWlsa0FyZWE6IHZhbHVlcyxcclxuICAgICAgaXNTaG93Q2xlYXJMaXN0OiBmYWxzZSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogW2VkaXRQb2x5Z29uIGRlc2NyaXB0aW9uXVxyXG4gICAqIEBwYXJhbSAge1t0eXBlXX0gaW5kZXggW2Rlc2NyaXB0aW9uXVxyXG4gICAqL1xyXG4gIGVkaXRQb2x5Z29uKGluZGV4KSB7XHJcbiAgICBlZGl0SW5kZXggPSBpbmRleDtcclxuICAgIGlmIChwb2x5RWRpdG9yKSB7XHJcbiAgICAgIGNvbnN0IHBvbHlnb24gPSBwb2x5RWRpdG9yLmFxWzBdLm1hcCgobWFya2VyKSA9PiAoW21hcmtlci5sbmcsIG1hcmtlci5sYXRdKSk7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgIC4uLnRoaXMuc3RhdGUsXHJcbiAgICAgICAgbWlsa0FyZWE6IHRoaXMuc3RhdGUubWlsa0FyZWEubWFwKChpdGVtLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuIGluZGV4ID09PSBlZGl0SW5kZXggPyBwb2x5Z29uIDogaXRlbTtcclxuICAgICAgICB9KSxcclxuICAgICAgfSk7XHJcbiAgICAgIHBvbHlFZGl0b3IuY2xvc2UoKTtcclxuICAgIH1cclxuICAgIGxldCBwb2x5Z29uID0gdGhpcy5wb2x5Z29uW2luZGV4XTtcclxuICAgIHRoaXMucG9seWdvbkluZGV4ID0gaW5kZXg7XHJcbiAgICB0aGlzLm1hcC5wbHVnaW4oWydBTWFwLlBvbHlFZGl0b3InXSwgKCkgPT4ge1xyXG4gICAgLy8g5a6e5L6L5YyW5aSa6L655b2i57yW6L6R5Zmo77yM5Lyg5YWl5Zyw5Zu+5a6e5L6L5ZKM6KaB6L+b6KGM57yW6L6R55qE5aSa6L655b2i5a6e5L6LXHJcbiAgICAgIHBvbHlFZGl0b3IgPSBuZXcgd2luZG93LkFNYXAuUG9seUVkaXRvcih0aGlzLm1hcCwgcG9seWdvbik7XHJcblxyXG4gICAgICAvLyDlvIDlkK/nvJbovpHmqKHlvI9cclxuICAgICAgcG9seUVkaXRvci5vcGVuKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMucG9seUVkaXRvciA9IHBvbHlFZGl0b3I7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBbb25NYXBDb21wbGV0ZSBkZXNjcmlwdGlvbl1cclxuICAgKiBAcGFyYW0gIHtbdHlwZV19IG1hcCBbZGVzY3JpcHRpb25dXHJcbiAgICovXHJcbiAgb25NYXBDb21wbGV0ZShtYXApIHtcclxuICAgIHRoaXMubWFwID0gbWFwO1xyXG4gICAgdGhpcy5tYXAuc2V0Rml0VmlldygpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogW3NhdmVQb2x5Z29uIGRlc2NyaXB0aW9uXVxyXG4gICAqL1xyXG4gIHNhdmVQb2x5Z29uKCkge1xyXG4gICAgY29uc3Qge21pbGtBcmVhfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBpZiAocG9seUVkaXRvcikge1xyXG4gICAgICBsZXQgY29tcGFyZTtcclxuICAgICAgdGhpcy5vdGhlclBvbHlnb24ubWFwKChpdGVtKSA9PiB7XHJcbiAgICAgICAgY29tcGFyZSA9IHRoaXMuY29tcGFyZShpdGVtLCB0aGlzLnBvbHlnb25bZWRpdEluZGV4XSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBlZGl0SW5kZXggPSBudWxsO1xyXG4gICAgICBpZiAoIWNvbXBhcmUpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgcG9seWdvbiA9IHBvbHlFZGl0b3IuYXFbMF0ubWFwKChtYXJrZXIpID0+IChbbWFya2VyLmxuZywgbWFya2VyLmxhdF0pKTtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgLi4udGhpcy5zdGF0ZSxcclxuICAgICAgICBtaWxrQXJlYTogbWlsa0FyZWEubWFwKChpdGVtLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuIGluZGV4ID09PSBlZGl0SW5kZXggPyBwb2x5Z29uIDogaXRlbTtcclxuICAgICAgICB9KSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBwb2x5RWRpdG9yLmNsb3NlKCk7XHJcbiAgICAgIHRoaXMuaGlkZUxpc3QoKTtcclxuICAgICAgcG9seUVkaXRvciA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBbY29tcGFyZSBkZXNjcmlwdGlvbl1cclxuICAgKiBAcGFyYW0gIHtbdHlwZV19IHBvbHlnb24gIFtkZXNjcmlwdGlvbl1cclxuICAgKiBAcGFyYW0gIHtbdHlwZV19IHBvbHlnb24xIFtkZXNjcmlwdGlvbl1cclxuICAgKiBAcmV0dXJuIHtbdHlwZV19ICAgICAgICAgIFtkZXNjcmlwdGlvbl1cclxuICAgKi9cclxuICBjb21wYXJlKHBvbHlnb24sIHBvbHlnb24xKSB7XHJcbiAgICBjb25zdCBwb2x5Z29uUGF0aCA9IHBvbHlnb24uZ2V0UGF0aCgpO1xyXG4gICAgY29uc3QgcG9seWdvbjFQYXRoID0gcG9seWdvbjEuZ2V0UGF0aCgpO1xyXG4gICAgLy8g5bCP5ZyI5piv5ZCm5Zyo5aSn5ZyI5YaFXHJcbiAgICBjb25zdCBpc1JpbmdJblJpbmcgPSB3aW5kb3cuQU1hcC5HZW9tZXRyeVV0aWwuaXNSaW5nSW5SaW5nKHBvbHlnb24xUGF0aCwgcG9seWdvblBhdGgpO1xyXG4gICAgLy8g5Lik5ZyI5piv5ZCm5Lqk5Y+JXHJcbiAgICBjb25zdCBkb2VzUmluZ1JpbmdJbnRlcnNlY3QgPSB3aW5kb3cuQU1hcC5HZW9tZXRyeVV0aWwuZG9lc1JpbmdSaW5nSW50ZXJzZWN0KHBvbHlnb24xUGF0aCwgcG9seWdvblBhdGgpO1xyXG4gICAgY29uc3QgcmluZ1JpbmdDbGlwID0gd2luZG93LkFNYXAuR2VvbWV0cnlVdGlsLnJpbmdSaW5nQ2xpcChwb2x5Z29uMVBhdGgsIHBvbHlnb25QYXRoKTtcclxuICAgIGNvbnN0IHJpbmdBcmVhID0gcGFyc2VJbnQod2luZG93LkFNYXAuR2VvbWV0cnlVdGlsLnJpbmdBcmVhKHJpbmdSaW5nQ2xpcCkpO1xyXG4gICAgbGV0IGNhblNhdmUgPSB0cnVlO1xyXG4gICAgaWYgKGlzUmluZ0luUmluZykge1xyXG4gICAgICBtZXNzYWdlLmVycm9yKCfkuKTlnIjlhbPns7vvvJrlnKjlpKflnIjlhoUnKTtcclxuICAgICAgY2FuU2F2ZSA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIGlmIChkb2VzUmluZ1JpbmdJbnRlcnNlY3QpIHtcclxuICAgICAgbWVzc2FnZS5lcnJvcign5Lik5ZyI5YWz57O777ya5Lik5ZyI55u45LqkLCDkuqTlj4nljLrln5/pnaLnp6/kuLonICsgcmluZ0FyZWEgKyAn5bmz5pa557GzJyk7XHJcbiAgICAgIGNhblNhdmUgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiBjYW5TYXZlO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBbb25Qb2x5Z29uQ29tcGxldGUgZGVzY3JpcHRpb25dXHJcbiAgICogQHBhcmFtICB7W3R5cGVdfSBpbmRleCAgIFtkZXNjcmlwdGlvbl1cclxuICAgKiBAcGFyYW0gIHtbdHlwZV19IG1hcCAgICAgW2Rlc2NyaXB0aW9uXVxyXG4gICAqIEBwYXJhbSAge1t0eXBlXX0gcG9seWdvbiBbZGVzY3JpcHRpb25dXHJcbiAgICovXHJcbiAgb25Qb2x5Z29uQ29tcGxldGUoaW5kZXgsIG1hcCwgcG9seWdvbikge1xyXG4gICAgdGhpcy5wb2x5Z29uW2luZGV4XSA9IHBvbHlnb247XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFtvdGhlclBvbHlnb25Db21wbGV0ZSBkZXNjcmlwdGlvbl1cclxuICAgKiBAcGFyYW0gIHtbdHlwZV19IGluZGV4ICAgW2Rlc2NyaXB0aW9uXVxyXG4gICAqIEBwYXJhbSAge1t0eXBlXX0gbWFwICAgICBbZGVzY3JpcHRpb25dXHJcbiAgICogQHBhcmFtICB7W3R5cGVdfSBwb2x5Z29uIFtkZXNjcmlwdGlvbl1cclxuICAgKi9cclxuICBvdGhlclBvbHlnb25Db21wbGV0ZShpbmRleCwgbWFwLCBwb2x5Z29uKSB7XHJcbiAgICB0aGlzLm90aGVyUG9seWdvbi5wdXNoKHBvbHlnb24pO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBbdG9nZ2xlQ2xlYXJMaXN0IGRlc2NyaXB0aW9uXVxyXG4gICAqL1xyXG4gIHRvZ2dsZUNsZWFyTGlzdCgpIHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgbWlsa0FyZWEsXHJcbiAgICB9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICBpZiAobWlsa0FyZWEubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgaXNTaG93Q2xlYXJMaXN0OiAhdGhpcy5zdGF0ZS5pc1Nob3dDbGVhckxpc3QsXHJcbiAgICAgIGlzU2hvd0VkaXRMaXN0OiBmYWxzZSxcclxuICAgIH0pO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBbdG9nZ2xlRWRpdExpc3QgZGVzY3JpcHRpb25dXHJcbiAgICovXHJcbiAgdG9nZ2xlRWRpdExpc3QoKSB7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgIG1pbGtBcmVhLFxyXG4gICAgfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgaWYgKG1pbGtBcmVhLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGlzU2hvd0NsZWFyTGlzdDogZmFsc2UsXHJcbiAgICAgIGlzU2hvd0VkaXRMaXN0OiAhdGhpcy5zdGF0ZS5pc1Nob3dFZGl0TGlzdCxcclxuICAgIH0pO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBbaGlkZUxpc3QgZGVzY3JpcHRpb25dXHJcbiAgICovXHJcbiAgaGlkZUxpc3QoKSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgaXNTaG93Q2xlYXJMaXN0OiBmYWxzZSxcclxuICAgICAgaXNTaG93RWRpdExpc3Q6IGZhbHNlLFxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFtvbkNoZWNrYm94Q2hhbmdlIGRlc2NyaXB0aW9uXVxyXG4gICAqIEBwYXJhbSAge1t0eXBlXX0gY2hlY2tlZFZhbHVlcyBbZGVzY3JpcHRpb25dXHJcbiAgICovXHJcbiAgb25DaGVja2JveENoYW5nZShjaGVja2VkVmFsdWVzKSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtjaGVja2VkVmFsdWVzfSk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFtyZW5kZXIgZGVzY3JpcHRpb25dXHJcbiAgICogQHJldHVybiB7W3R5cGVdfSBbZGVzY3JpcHRpb25dXHJcbiAgICovXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3Qge2JvdW5kLCBtaWxrQXJlYSwgb3RoZXJNaWxrQXJlYSwgaXNTaG93RWRpdExpc3QsIGlzU2hvd0NsZWFyTGlzdCwgbWFya2VyfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCBtYXJrZXJMaXN0ID0gdGhpcy5jb3VudFBvbHlnb25DZW50ZXIobWlsa0FyZWEpO1xyXG5cclxuICAgIGNvbnN0IHBsYWluT3B0aW9ucyA9IEFycmF5LmZyb20oe2xlbmd0aDogbWFya2VyTGlzdC5sZW5ndGh9KS5tYXAoKHYsIGspID0+IGAke2sgKyAxfWApO1xyXG4gICAgY29uc3QgbWFwSGVpZ2h0ID0gKDEgLSAoMTYwIC8gd2luZG93LmlubmVySGVpZ2h0KSkgKiAxMDA7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IHN0eWxlPXt7d2lkdGg6ICcxMDAlJywgaGVpZ2h0OiBgJHttYXBIZWlnaHR9dmhgLCBwb3NpdGlvbjogJ3JlZWxhdGl2ZSd9fT5cclxuICAgICAgICA8QnV0dG9uR3JvdXAgY2xhc3NOYW1lPXtzdHlsZXMuYnV0dG9uR3JvdXB9PlxyXG4gICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXt0aGlzLmNyYXRlUG9seS5iaW5kKHRoaXMpfT7nu5jliLY8L0J1dHRvbj5cclxuICAgICAgICAgIDxCdXR0b24gb25DbGljaz17dGhpcy50b2dnbGVFZGl0TGlzdC5iaW5kKHRoaXMpfT7nvJbovpE8L0J1dHRvbj5cclxuICAgICAgICAgIDxCdXR0b24gb25DbGljaz17dGhpcy50b2dnbGVDbGVhckxpc3QuYmluZCh0aGlzKX0+5riF6ZmkPC9CdXR0b24+XHJcbiAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e3RoaXMuc2F2ZVBvbHlnb24uYmluZCh0aGlzKX0+5L+d5a2YPC9CdXR0b24+XHJcbiAgICAgICAgPC9CdXR0b25Hcm91cD5cclxuICAgICAgICB7XHJcbiAgICAgICAgICBpc1Nob3dDbGVhckxpc3QgJiZcclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuYnV0dG9uR3JvdXAyfT5cclxuICAgICAgICAgICAgPENoZWNrYm94R3JvdXAgb3B0aW9ucz17cGxhaW5PcHRpb25zfSBvbkNoYW5nZT17dGhpcy5vbkNoZWNrYm94Q2hhbmdlLmJpbmQodGhpcyl9Lz5cclxuICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuY2xlYXJQb2x5Z29uLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAg56Gu5a6aXHJcbiAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlzU2hvd0VkaXRMaXN0ICYmXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmJ1dHRvbkdyb3VwM30+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBwbGFpbk9wdGlvbnMubWFwKChubykgPT4gKFxyXG4gICAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmVkaXRQb2x5Z29uLmJpbmQodGhpcywgbm8pfVxyXG4gICAgICAgICAgICAgICAgICBrZXk9e25vfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICB7bm99XHJcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICApKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICB9XHJcbiAgICAgICAgPEFNYXBcclxuICAgICAgICAgIGFwcEtleT17QU1BUF9LRVl9XHJcbiAgICAgICAgICBib3VuZHM9e2JvdW5kfVxyXG4gICAgICAgICAgZGVmYXVsdEN1cnNvcj0ncG9pbnRlcidcclxuICAgICAgICAgIG1hcFN0eWxlPXtBTUFQX1NUWUxFfVxyXG4gICAgICAgICAgb25Db21wbGV0ZT17dGhpcy5vbk1hcENvbXBsZXRlLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhpZGVMaXN0LmJpbmQodGhpcyl9XHJcbiAgICAgICAgICB6b29tPXsxM31cclxuICAgICAgICA+XHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIG1pbGtBcmVhLm1hcCgocGF0aCwgaW5kZXgpID0+IChcclxuICAgICAgICAgICAgICA8UG9seWdvblxyXG4gICAgICAgICAgICAgICAga2V5PXtpbmRleH1cclxuICAgICAgICAgICAgICAgIGZpbGxDb2xvcj0nIzhkYzVmMydcclxuICAgICAgICAgICAgICAgIHN0cm9rZUNvbG9yPScjNGY3ZGUzJ1xyXG4gICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk9JzAuMydcclxuICAgICAgICAgICAgICAgIHBhdGg9e3BhdGh9XHJcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlPXt0aGlzLm9uUG9seWdvbkNvbXBsZXRlLmJpbmQodGhpcywgaW5kZXggKyAxKX1cclxuICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICApKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBtYXJrZXJMaXN0Lm1hcCgocG9zaXRpb24sIGluZGV4KSA9PiAoXHJcbiAgICAgICAgICAgICAgPE1hcmtlclxyXG4gICAgICAgICAgICAgICAgY29udGVudD17XHJcbiAgICAgICAgICAgICAgICAgIGA8ZGl2IGNsYXNzPScke3N0eWxlcy5tYXJrZXJ9Jz5cclxuICAgICAgICAgICAgICAgICAgICAke2luZGV4ICsgMX1cclxuICAgICAgICAgICAgICAgICAgPC9kaXY+YFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAga2V5PXtpbmRleH1cclxuICAgICAgICAgICAgICAgIG9mZnNldD17Wy0xMCwgLTEwXX1cclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uPXtwb3NpdGlvbn1cclxuICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICApKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBvdGhlck1pbGtBcmVhLm1hcCgocGF0aCwgaW5kZXgpID0+IChcclxuICAgICAgICAgICAgICA8UG9seWdvblxyXG4gICAgICAgICAgICAgICAga2V5PXtpbmRleH1cclxuICAgICAgICAgICAgICAgIHBhdGg9e3BhdGh9XHJcbiAgICAgICAgICAgICAgICBzdHJva2VDb2xvcj0nIzQyODVGNCdcclxuICAgICAgICAgICAgICAgIGZpbGxDb2xvcj0nYmxhY2snXHJcbiAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eT0nMC4zJ1xyXG4gICAgICAgICAgICAgICAgYnViYmxlPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZT17dGhpcy5vdGhlclBvbHlnb25Db21wbGV0ZS5iaW5kKHRoaXMsIGluZGV4ICsgMSl9XHJcbiAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgKSlcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgbWFya2VyLm1hcCgobWFya2VyLCBpbmRleCkgPT4gKFxyXG4gICAgICAgICAgICAgIDxNYXJrZXJcclxuICAgICAgICAgICAgICAgIGtleT17aW5kZXh9XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbj17bWFya2VyfVxyXG4gICAgICAgICAgICAgICAgb2Zmc2V0PXtbLTEwLCAtMzBdfVxyXG4gICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICkpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgPC9BTWFwPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICk7XHJcbiAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IExpc3Q7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=